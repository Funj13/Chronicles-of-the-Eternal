[gd_scene load_steps=13 format=3 uid="uid://d4esd54wgwy5w"]

[ext_resource type="Script" uid="uid://c6mfocdmoj4g1" path="res://scripts/ui_stats.gd" id="1_npunn"]
[ext_resource type="Texture2D" uid="uid://bxnmq8axbf6pd" path="res://Assets/Architecture/HUD.png" id="2_12i5q"]
[ext_resource type="Texture2D" uid="uid://dtuq31x5ekn8f" path="res://Assets/Architecture/HP_bar.png" id="3_enorc"]
[ext_resource type="Texture2D" uid="uid://2xu2ayasexog" path="res://Assets/Architecture/MP_bar.png" id="4_o7412"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_l3mq7"]
bg_color = Color(0.11764706, 0.12941177, 0.11764706, 0.7490196)
corner_radius_top_left = 50
corner_radius_top_right = 50
corner_radius_bottom_right = 50
corner_radius_bottom_left = 50

[sub_resource type="Shader" id="Shader_3nhdu"]
code = "shader_type canvas_item;

// Cores configuráveis
uniform vec4 screen_color : source_color = vec4(0.12, 0.15, 0.12, 1.0); // Verde Escuro Fundo
uniform vec4 scan_line_color : source_color = vec4(0.0, 0.0, 0.0, 0.5); // Linhas Pretas
uniform float scan_line_count : hint_range(0, 1080) = 100.0; // Quantidade de linhas
uniform float speed : hint_range(-10.0, 10.0) = 0.5; // Velocidade do movimento (opcional)

void fragment() {
	// 1. Cor Base da Tela
	vec4 color = screen_color;
	
	// 2. Criar Scanlines (Linhas Horizontais)
	// Usamos seno para criar o padrão de listras
	float s = sin((UV.y * scan_line_count * 3.14) + (TIME * speed));
	s = (s * 0.5 + 0.5); // Normaliza para 0.0 a 1.0
	
	// Aplica as linhas escuras
	color = mix(color, color - scan_line_color, s);
	
	// 3. Vignette (Escurecer as bordas para parecer vidro curvo)
	float dist = distance(UV, vec2(0.5));
	color.rgb *= (1.0 - dist * 0.8); // Escurece as bordas
	
	COLOR = color;
}
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_5m3ap"]
shader = SubResource("Shader_3nhdu")
shader_parameter/screen_color = Color(0.12, 0.15, 0.12, 1)
shader_parameter/scan_line_color = Color(0, 0, 0, 0.5)
shader_parameter/scan_line_count = 50.000002375
shader_parameter/speed = 0.5

[sub_resource type="LabelSettings" id="LabelSettings_jjjqh"]
font_size = 40
font_color = Color(0.9490196, 0.93333334, 0.8666667, 1)
shadow_size = 5
shadow_color = Color(0.36078432, 0.33333334, 0.30980393, 1)
shadow_offset = Vector2(0, 0)

[sub_resource type="AtlasTexture" id="AtlasTexture_p31tp"]
atlas = ExtResource("3_enorc")
region = Rect2(143, 262, 912, 117)

[sub_resource type="LabelSettings" id="LabelSettings_i28vy"]
font_size = 13
font_color = Color(0.9490196, 0.93333334, 0.8666667, 1)
shadow_size = 2
shadow_color = Color(0.36078432, 0.33333334, 0.30980393, 1)
shadow_offset = Vector2(0, 0)

[sub_resource type="AtlasTexture" id="AtlasTexture_f4mne"]
atlas = ExtResource("4_o7412")
region = Rect2(287.61026, 753.68713, 1826.3385, 375.1283)

[sub_resource type="LabelSettings" id="LabelSettings_88nox"]
font_size = 13
font_color = Color(0.9490196, 0.93333334, 0.8666667, 1)
shadow_size = 4
shadow_color = Color(0.36078432, 0.33333334, 0.30980393, 1)
shadow_offset = Vector2(0, 0)

[node name="UI_Stats" type="Control"]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0
script = ExtResource("1_npunn")

[node name="Visual_Frame" type="TextureRect" parent="."]
layout_mode = 1
anchors_preset = -1
anchor_right = 7.3250003
anchor_bottom = 2.482
offset_left = -30.0
offset_top = -65.0
offset_right = -9.0
offset_bottom = 70.17333
texture = ExtResource("2_12i5q")
expand_mode = 5

[node name="Level_Display" type="Control" parent="."]
anchors_preset = 0
offset_left = 37.0
offset_top = 24.0
offset_right = 86.0
offset_bottom = 78.0

[node name="CRT_Background" type="Panel" parent="Level_Display"]
clip_children = 1
layout_mode = 0
offset_left = -9.0
offset_top = -9.0
offset_right = 55.0
offset_bottom = 58.0
theme_override_styles/panel = SubResource("StyleBoxFlat_l3mq7")

[node name="Screen_Effect" type="ColorRect" parent="Level_Display/CRT_Background"]
material = SubResource("ShaderMaterial_5m3ap")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Label_Level" type="Label" parent="Level_Display"]
layout_mode = 0
offset_left = -13.0
offset_top = -10.0
offset_right = 62.0
offset_bottom = 64.0
text = "99"
label_settings = SubResource("LabelSettings_jjjqh")
horizontal_alignment = 1
vertical_alignment = 1

[node name="Bars_Container" type="Control" parent="."]
anchors_preset = 0
offset_left = 104.0
offset_top = 37.0
offset_right = 238.0
offset_bottom = 71.0

[node name="HP_Bar" type="TextureProgressBar" parent="Bars_Container"]
layout_mode = 1
anchors_preset = -1
anchor_right = 1.0
anchor_bottom = 0.439
offset_left = 1.0
offset_bottom = -0.9260006
nine_patch_stretch = true
texture_progress = SubResource("AtlasTexture_p31tp")

[node name="Label_HP" type="Label" parent="Bars_Container/HP_Bar"]
layout_mode = 0
offset_left = 2.0
offset_top = -5.0
offset_right = 42.0
offset_bottom = 17.0
text = "HP"
label_settings = SubResource("LabelSettings_i28vy")
vertical_alignment = 1
autowrap_mode = 2

[node name="MP_Bar" type="TextureProgressBar" parent="Bars_Container"]
layout_mode = 1
anchors_preset = -1
anchor_top = 0.56100005
anchor_right = 0.78800005
anchor_bottom = 1.0
offset_left = 1.0
offset_top = -0.001001358
offset_right = 0.07199097
offset_bottom = -1.0
nine_patch_stretch = true
texture_progress = SubResource("AtlasTexture_f4mne")

[node name="Label_MP" type="Label" parent="Bars_Container/MP_Bar"]
layout_mode = 0
offset_left = 2.0
offset_top = -3.0
offset_right = 30.0
offset_bottom = 19.0
text = "MP"
label_settings = SubResource("LabelSettings_88nox")
vertical_alignment = 1
autowrap_mode = 1
